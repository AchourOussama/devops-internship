services:
    - name: docker:24.0.3-dind
      alias: dockerd

stages :
  - test
  - build
  - run

before_script:

  - ./ci-scripts/dockerhub-login.sh  

  
find-docker-port:
  tags:
    - t-009-prod
  image: alpine
  services:
    - dockerd
  script:
    - apk add nmap
    - nmap -sT -p- docker

build:
  stage: build
  image: docker:24.0.3-cli
  services:  
    - dockerd
  tags:
    - t-009-prod
  
  script: 
    - chmod ugo+rwx ./ci-scripts/build.sh 
    - ./ci-scripts/build.sh

